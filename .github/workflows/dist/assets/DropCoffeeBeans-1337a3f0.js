import{r as B,o as M,g as f,a as R,b as E,c as L,f as h,h as x,n as P}from"./index-f8263904.js";const X=""+new URL("zhanbu2-5f109ed1.png",import.meta.url).href,k=""+new URL("baobei-820ff7ab.svg",import.meta.url).href,I=h("img",{src:X,class:"game-container wx",alt:"",style:{width:"180vw",height:"80vh"}},null,-1),U=h("img",{id:"Cup",src:k,class:"BaoCup",alt:"",style:{width:"20vw",height:"12vh"}},null,-1),S=[U],T={name:"DropCoffeeBeans",data(){return{isActive:1,isDragging:!1,initialMouseX:0,initialMouseY:0,initialBoxX:0,initialBoxY:0,facial:!1}},components:{},methods:{startDrag(n){this.isDragging=!0,n.type==="mousedown"?(this.initialMouseX=n.clientX,this.initialMouseY=n.clientY,this.initialBoxX=parseInt(window.getComputedStyle(n.target).getPropertyValue("left"),10),window.addEventListener("mousemove",this.drag),window.addEventListener("mouseup",this.endDrag)):n.type==="touchstart"&&(this.initialMouseX=n.touches[0].pageX,this.initialMouseY=n.touches[0].pageY,this.initialBoxX=parseInt(window.getComputedStyle(n.target).getPropertyValue("left"),10),window.addEventListener("touchmove",this.drag),window.addEventListener("touchend",this.endDrag))},drag(n){if(this.isDragging){const a=document.getElementById("box");var s=0;n.type==="mousemove"&&(s=n.clientX),n.type==="touchmove"&&(s=n.touches[0].pageX);var c=window.innerWidth-a.style.width;s<=0?(a.style.left="0px",console.log("1")):s>=c?(a.style.left=`${c}px`,console.log("2")):a.style.left=`${s}px`}},endDrag(){this.isDragging=!1,window.removeEventListener("mousemove",this.drag),window.removeEventListener("mouseup",this.endDrag),window.removeEventListener("touchmove",this.drag),window.removeEventListener("touchend",this.endDrag)}}},A=Object.assign(T,{setup(n){const s=B(null),c={width:40,height:100,speed:3,imageUrl:"@/assets/svg/c.svg",maxRotateDeg:30,renderTime:1200,split:20,screenPadding:50,width:10,totalPackets:50,WindowWidth:"100vw"};var a=0,w=!1;function p(t){const o=Math.random()*1e18,e=document.createElement("img");e.src=new URL(""+new URL("c-97367e7e.svg",import.meta.url).href,self.location).href,e.classList.add("CoffeeBeans"),e.id="Bean-"+o,e.style.width="5vw",e.style.height="3vh",e.style.left=t+"px",s.value.appendChild(e),setTimeout(()=>{e&&s.value.removeChild(e)},2e3)}function v(){const{split:t,screenPadding:o,width:e,WindowWidth:r}=c,d=(window.innerWidth-o*2-e*t)/(t+1);return Object.keys([...Array(t)]).map(Number).map(g=>o+d+(e+d)*g)}function y(t){return t.sort(()=>.5-Math.random())}function D(){const t=document.getElementById("box");for(var o=s.value.children,e=1;e<o.length;e++)if(Math.abs(parseInt(t.style.left,10)-o[e].getBoundingClientRect().left)<=40&&Math.abs(parseInt(t.getBoundingClientRect().top,10)-o[e].getBoundingClientRect().top<=100)){const r=document.querySelector(`#${o[e].id}`);if(console.log("hhhhh",r),s.value&&r){console.log("yessssssssssss");const{top:l,left:m,width:d,height:g}=r.getBoundingClientRect(),u=l+g*3/2,C=m+d,i=document.createElement("img");i.src=new URL(""+new URL("Jia1-7552138a.svg",import.meta.url).href,self.location).href,i.style.position="absolute",i.style.top=u+"px",i.style.left=C+"px",i.style.width="30px",i.style.height="30px",document.body.appendChild(i),a+=1,console.log(a),r.src=new URL(""+new URL("cc-8e332d71.svg",import.meta.url).href,self.location).href,setTimeout(()=>{i&&document.body.removeChild(i)},500)}}}function b(t){p(t),P(()=>{D()})}return M(async()=>{const t=v(),{split:o,totalPackets:e}=c,r=[...Array(Math.ceil(e/o))].map(()=>y(t)).flat().splice(0,e).map(Math.ceil);let l=0,m=null;p(r[l++]),m=setInterval(async function(){l>=e&&(clearInterval(m),setTimeout(()=>{console.log("whwrhszslifj",a);for(var g=!1,u=0;u<d.length;u++)if(a%d[u]==0){f.replace({path:"/outcome",query:{index:u}}),g=!0,console.log("aaaaaaaaaaaaaa");break}g||f.replace({path:"/outcome",query:{index:5}})},3e3)),b(r[l++]),console.log(l)},400),R(()=>{console.log("DOM updated")});var d=[2,3,5,7,11];console.log("ffffff",w)}),(t,o)=>(E(),L("div",{class:"game-container",ref_key:"gameContainerRef",ref:s,id:"backPic"},[I,h("div",{class:x(["CupContainer",t.isDragging?"grabbing":""]),id:"box",onMousedown:o[0]||(o[0]=(...e)=>t.startDrag&&t.startDrag(...e)),onTouchstart:o[1]||(o[1]=(...e)=>t.startDrag&&t.startDrag(...e)),onMousemove:o[2]||(o[2]=(...e)=>t.drag&&t.drag(...e)),onTouchmove:o[3]||(o[3]=(...e)=>t.drag&&t.drag(...e)),onMouseup:o[4]||(o[4]=(...e)=>t.endDrag&&t.endDrag(...e)),onTouchend:o[5]||(o[5]=(...e)=>t.endDrag&&t.endDrag(...e))},S,34)],512))}});export{A as default};
