import{r as B,o as M,g as f,a as E,b as x,c as P,f as m,h as R,n as X}from"./index-589a06d6.js";const k="/assets/zhanbu2-5f109ed1.png",I="/assets/baobei-820ff7ab.svg",L=m("img",{src:k,class:"game-container wx",alt:"",style:{width:"180vw",height:"80vh"}},null,-1),S=m("img",{id:"Cup",src:I,class:"BaoCup",alt:"",style:{width:"20vw",height:"12vh"}},null,-1),T=[S],W={name:"DropCoffeeBeans",data(){return{isActive:1,isDragging:!1,initialMouseX:0,initialMouseY:0,initialBoxX:0,initialBoxY:0,facial:!1}},components:{},methods:{startDrag(o){this.isDragging=!0,o.type==="mousedown"?(this.initialMouseX=o.clientX,this.initialMouseY=o.clientY,this.initialBoxX=parseInt(window.getComputedStyle(o.target).getPropertyValue("left"),10),window.addEventListener("mousemove",this.drag),window.addEventListener("mouseup",this.endDrag)):o.type==="touchstart"&&(this.initialMouseX=o.touches[0].pageX,this.initialMouseY=o.touches[0].pageY,this.initialBoxX=parseInt(window.getComputedStyle(o.target).getPropertyValue("left"),10),window.addEventListener("touchmove",this.drag),window.addEventListener("touchend",this.endDrag))},drag(o){if(this.isDragging){const a=document.getElementById("box");var n=0;o.type==="mousemove"&&(n=o.clientX),o.type==="touchmove"&&(n=o.touches[0].pageX);var u=window.innerWidth-a.style.width;n<=0?(a.style.left="0px",console.log("1")):n>=u?(a.style.left=`${u}px`,console.log("2")):a.style.left=`${n}px`}},endDrag(){this.isDragging=!1,window.removeEventListener("mousemove",this.drag),window.removeEventListener("mouseup",this.endDrag),window.removeEventListener("touchmove",this.drag),window.removeEventListener("touchend",this.endDrag)}}},Y=Object.assign(W,{setup(o){const n=B(null),u={width:40,height:100,speed:3,imageUrl:"@/assets/svg/c.svg",maxRotateDeg:30,renderTime:1200,split:20,screenPadding:50,width:10,totalPackets:50,WindowWidth:"100vw"};var a=0,w=!1;function p(t){const s=Math.random()*1e18,e=document.createElement("img");e.src=new URL("/assets/c-97367e7e.svg",self.location).href,e.classList.add("CoffeeBeans"),e.id="Bean-"+s,e.style.width="5vw",e.style.height="3vh",e.style.left=t+"px",n.value.appendChild(e),setTimeout(()=>{e&&n.value.removeChild(e)},2e3)}function v(){const{split:t,screenPadding:s,width:e,WindowWidth:r}=u,d=(window.innerWidth-s*2-e*t)/(t+1);return Object.keys([...Array(t)]).map(Number).map(g=>s+d+(e+d)*g)}function y(t){return t.sort(()=>.5-Math.random())}function D(){const t=document.getElementById("box");for(var s=n.value.children,e=1;e<s.length;e++)if(Math.abs(parseInt(t.style.left,10)-s[e].getBoundingClientRect().left)<=40&&Math.abs(parseInt(t.getBoundingClientRect().top,10)-s[e].getBoundingClientRect().top<=100)){const r=document.querySelector(`#${s[e].id}`);if(console.log("hhhhh",r),n.value&&r){console.log("yessssssssssss");const{top:l,left:h,width:d,height:g}=r.getBoundingClientRect(),c=l+g*3/2,C=h+d,i=document.createElement("img");i.src=new URL("/assets/Jia1-7552138a.svg",self.location).href,i.style.position="absolute",i.style.top=c+"px",i.style.left=C+"px",i.style.width="30px",i.style.height="30px",document.body.appendChild(i),a+=1,console.log(a),r.src=new URL("/assets/cc-8e332d71.svg",self.location).href,setTimeout(()=>{i&&document.body.removeChild(i)},500)}}}function b(t){p(t),X(()=>{D()})}return M(async()=>{const t=v(),{split:s,totalPackets:e}=u,r=[...Array(Math.ceil(e/s))].map(()=>y(t)).flat().splice(0,e).map(Math.ceil);let l=0,h=null;p(r[l++]),h=setInterval(async function(){l>=e&&(clearInterval(h),setTimeout(()=>{console.log("whwrhszslifj",a);for(var g=!1,c=0;c<d.length;c++)if(a%d[c]==0){f.replace({path:"/outcome",query:{index:c}}),g=!0,console.log("aaaaaaaaaaaaaa");break}g||f.replace({path:"/outcome",query:{index:5}})},3e3)),b(r[l++]),console.log(l)},400),E(()=>{console.log("DOM updated")});var d=[2,3,5,7,11];console.log("ffffff",w)}),(t,s)=>(x(),P("div",{class:"game-container",ref_key:"gameContainerRef",ref:n,id:"backPic"},[L,m("div",{class:R(["CupContainer",t.isDragging?"grabbing":""]),id:"box",onMousedown:s[0]||(s[0]=(...e)=>t.startDrag&&t.startDrag(...e)),onTouchstart:s[1]||(s[1]=(...e)=>t.startDrag&&t.startDrag(...e)),onMousemove:s[2]||(s[2]=(...e)=>t.drag&&t.drag(...e)),onTouchmove:s[3]||(s[3]=(...e)=>t.drag&&t.drag(...e)),onMouseup:s[4]||(s[4]=(...e)=>t.endDrag&&t.endDrag(...e)),onTouchend:s[5]||(s[5]=(...e)=>t.endDrag&&t.endDrag(...e))},T,34)],512))}});export{Y as default};
